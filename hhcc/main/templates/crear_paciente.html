{% extends 'base.html' %}
{% load static %}

{% block title %}Nuevo Paciente - CardioPrieto{% endblock %}

{% block content %}
<div class="container mx-auto p-6 max-w-6xl">
    <h1 class="text-2xl font-bold mb-8 text-left">Nuevo Paciente</h1>

    <div class="bg-white shadow-md rounded-lg p-8 mb-8">
        <form method="POST" class="grid grid-cols-1 gap-6 md:grid-cols-2">
            {% csrf_token %}
            
            <!-- Campos requeridos -->
            <div class="form-field">
                <label for="{{ form.idTipoDoc.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Tipo de Documento *</label>
                <select name="{{ form.idTipoDoc.html_name }}" id="{{ form.idTipoDoc.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" required>
                    {% for value, text in form.idTipoDoc.field.choices %}
                    <option value="{{ value }}">{{ text }}</option>
                    {% endfor %}
                </select>
                {% if form.idTipoDoc.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.idTipoDoc.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label for="{{ form.numDoc.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Nº Documento *</label>
                <input type="text" name="{{ form.numDoc.html_name }}" id="{{ form.numDoc.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" 
                    placeholder="Ingrese número de documento" required>
                {% if form.numDoc.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.numDoc.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label for="{{ form.nombre.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Nombre *</label>
                <input type="text" name="{{ form.nombre.html_name }}" id="{{ form.nombre.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" 
                    placeholder="Ingrese nombre" required>
                {% if form.nombre.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.nombre.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label for="{{ form.apellido.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Apellido *</label>
                <input type="text" name="{{ form.apellido.html_name }}" id="{{ form.apellido.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" 
                    placeholder="Ingrese apellido" required>
                {% if form.apellido.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.apellido.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label for="{{ form.fechaNac.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Fecha de Nacimiento *</label>
                <input type="date" name="{{ form.fechaNac.html_name }}" id="{{ form.fechaNac.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" required>
                {% if form.fechaNac.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.fechaNac.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label class="block text-sm font-medium text-gray-700 mb-2">Sexo *</label>
                <div class="flex gap-4">
                    <label class="flex items-center">
                        <input type="radio" name="{{ form.sexo.html_name }}" value="M" required>
                        <span class="ml-2">Hombre</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="{{ form.sexo.html_name }}" value="F" required>
                        <span class="ml-2">Mujer</span>
                    </label>
                </div>
                {% if form.sexo.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.sexo.errors.0 }}</p>
                {% endif %}
            </div>
            
            <!-- Campos opcionales -->
            <div class="form-field">
                <label for="{{ form.mail.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                <input type="email" name="{{ form.mail.html_name }}" id="{{ form.mail.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" 
                    placeholder="Ingrese email">
                {% if form.mail.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.mail.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label for="{{ form.telefono.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Teléfono</label>
                <input type="text" name="{{ form.telefono.html_name }}" id="{{ form.telefono.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" 
                    placeholder="Ingrese teléfono">
                {% if form.telefono.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.telefono.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label for="{{ form.celular.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Celular</label>
                <input type="text" name="{{ form.celular.html_name }}" id="{{ form.celular.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" 
                    placeholder="Ingrese celular">
                {% if form.celular.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.celular.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label for="{{ form.direccion.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Dirección</label>
                <input type="text" name="{{ form.direccion.html_name }}" id="{{ form.direccion.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" 
                    placeholder="Ingrese dirección">
                {% if form.direccion.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.direccion.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label for="{{ form.localidad.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Localidad</label>
                <input type="text" name="{{ form.localidad.html_name }}" id="{{ form.localidad.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" 
                    placeholder="Ingrese localidad">
                {% if form.localidad.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.localidad.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label for="{{ form.obraSocial.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Obra Social</label>
                <input type="text" name="{{ form.obraSocial.html_name }}" id="{{ form.obraSocial.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" 
                    placeholder="Ingrese obra social">
                {% if form.obraSocial.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.obraSocial.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label for="{{ form.plan.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Plan</label>
                <input type="text" name="{{ form.plan.html_name }}" id="{{ form.plan.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" 
                    placeholder="Ingrese plan">
                {% if form.plan.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.plan.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label for="{{ form.afiliado.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Nº Afiliado</label>
                <input type="text" name="{{ form.afiliado.html_name }}" id="{{ form.afiliado.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" 
                    placeholder="Ingrese número de afiliado">
                {% if form.afiliado.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.afiliado.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label for="{{ form.profesion.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Profesión</label>
                <input type="text" name="{{ form.profesion.html_name }}" id="{{ form.profesion.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" 
                    placeholder="Ingrese profesión">
                {% if form.profesion.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.profesion.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="form-field">
                <label for="{{ form.referente.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Médico Referente</label>
                <input type="text" name="{{ form.referente.html_name }}" id="{{ form.referente.id_for_label }}" 
                    class="w-full p-2 border rounded focus:ring-1 focus:ring-[#9a4035] focus:border-[#9a4035]" 
                    placeholder="Ingrese médico referente">
                {% if form.referente.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.referente.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="col-span-2 flex justify-end space-x-4 mt-4">
                <a href="{% url 'listar_buscar_pacientes' %}" 
                   class="btn-hover-effect px-4 py-2 text-[#9a4035] border border-[#9a4035] rounded-lg hover:bg-[#9a4035] hover:text-white">
                    Cancelar
                </a>
                <button type="submit" 
                    class="btn-hover-effect px-4 py-2 bg-[#9a4035] text-white rounded-lg hover:bg-[#7a332b]">
                    Guardar Paciente
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}